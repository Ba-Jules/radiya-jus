<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Radiya - Commande en ligne</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap">
  <style>
    body { margin:0; font-family: 'Plus Jakarta Sans', sans-serif; background:#121212; color:#fff; }
    header { display:flex; justify-content:space-between; align-items:center; padding:15px 5%; background:#000; position:sticky; top:0; z-index:100; }
    header img { height:50px; }
    .btn { padding:12px 24px; border:none; border-radius:25px; font-weight:600; cursor:pointer; }
    .btn-primary { background:#FF6B35; color:#fff; }
    .btn-primary:hover { opacity:0.9; }
    .hero img { width:100%; display:block; }
    .products { padding:40px 5%; }
    .products h2 { text-align:center; color:#FF6B35; font-size:2rem; margin-bottom:20px; }
    .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:15px; }
    .card { background:#1a1a1a; padding:15px; border-radius:8px; text-align:center; }
    .card img { width:100%; height:180px; object-fit:cover; border-radius:5px; margin-bottom:10px; }
    footer { text-align:center; padding:20px; color:#aaa; border-top:1px solid #333; }

    /* Modal */
    .modal-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:2000; }
    .modal { background:#1e1e1e; padding:20px; border-radius:10px; max-width:600px; width:95%; color:#fff; max-height:90vh; overflow-y:auto; }
    .modal h2 { margin-bottom:15px; }
    .form-group { margin-bottom:15px; }
    .form-group label { display:block; margin-bottom:5px; font-weight:600; }
    .form-group input, textarea { width:100%; padding:10px; border-radius:6px; border:1px solid #444; background:#2a2a2a; color:#fff; }
    .order-item { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
    .order-item-details { display:flex; flex-direction:column; }
    .quantity-input { width:60px; text-align:center; }
    .order-total { font-size:1.2rem; font-weight:700; margin-top:15px; text-align:right; }
    .close-btn { float:right; font-size:22px; cursor:pointer; color:#fff; }
    .status { text-align:center; margin-top:15px; padding:10px; border-radius:6px; display:none; }
    .status.success { background:green; }
    .status.error { background:#b22222; }
  </style>
</head>
<body>

<header>
  <img src="assets/logo.png" alt="Logo Radiya">
  <button class="btn btn-primary" id="open-modal">Passer Commande</button>
</header>

<section class="hero">
  <img src="assets/nos_best_seller.png" alt="Nos Best Sellers">
</section>

<section class="products">
  <h2>Nos Délicieux Jus</h2>
  <div class="grid">
    <div class="card"><img src="assets/bissap_menthe.png"><h3>Bissap Menthe</h3></div>
    <div class="card"><img src="assets/bissap_orange.png"><h3>Bissap Orange</h3></div>
    <div class="card"><img src="assets/bouye_fraise.png"><h3>Bouye Fraise</h3></div>
    <div class="card"><img src="assets/bouye_lait.png"><h3>Bouye Lait</h3></div>
    <div class="card"><img src="assets/maade_passion.png"><h3>Maade Passion</h3></div>
    <div class="card"><img src="assets/maade_ananas.png"><h3>Maade Ananas</h3></div>
    <div class="card"><img src="assets/ananas_passion.png"><h3>Ananas Passion</h3></div>
    <div class="card"><img src="assets/bouye_ananas.png"><h3>Bouye Ananas</h3></div>
  </div>
</section>

<footer>
  <p>Contact : 78 597 39 39 | radiya.jus@gmail.com</p>
  <p>© 2025 Radiya. Tous droits réservés.</p>
</footer>

<!-- Modal -->
<div class="modal-overlay" id="modal">
  <div class="modal">
    <span class="close-btn" id="close-modal">&times;</span>
    <h2>Votre Commande</h2>
    <form id="order-form">
      <div class="form-group"><label>Nom</label><input type="text" id="name" required></div>
      <div class="form-group"><label>Téléphone</label><input type="tel" id="phone" required></div>
      <hr>
      <h3>Sélection des produits</h3>
      <div id="order-list"></div>
      <div class="order-total">Total : <span id="total">0</span> FCFA</div>
      <div class="form-group"><label>Commentaires / Adresse</label><textarea id="comments" rows="3"></textarea></div>
      <button type="submit" class="btn btn-primary" style="width:100%;">Envoyer la Commande</button>
      <div id="status" class="status"></div>
    </form>
  </div>
</div>

<script>
const products = [
  { name:'Bissap Menthe (250ml)', price:350 },
  { name:'Bissap Menthe (1.5L)', price:2000 },
  { name:'Bissap Orange (250ml)', price:400 },
  { name:'Bissap Orange (1.5L)', price:2500 },
  { name:'Bouye Fraise (250ml)', price:500 },
  { name:'Bouye Fraise (1.5L)', price:3000 },
  { name:'Bouye Lait (250ml)', price:400 },
  { name:'Bouye Lait (1.5L)', price:2500 },
  { name:'Bouye Ananas (250ml)', price:450 },
  { name:'Bouye Ananas (1.5L)', price:2800 },
  { name:'Maade Passion (250ml)', price:500 },
  { name:'Maade Passion (1.5L)', price:3000 },
  { name:'Maade Ananas (250ml)', price:500 },
  { name:'Maade Ananas (1.5L)', price:3000 },
  { name:'Ananas Passion (250ml)', price:500 },
  { name:'Ananas Passion (1.5L)', price:3000 }
];

const orderList = document.getElementById('order-list');
const totalEl = document.getElementById('total');
let total = 0;

// Génération des champs produits
products.forEach((p,i)=>{
  const div = document.createElement('div');
  div.className='order-item';
  div.innerHTML=`<div class="order-item-details"><span>${p.name}</span><span>${p.price} FCFA</span></div>
                 <input type="number" class="quantity-input" min="0" value="0" data-price="${p.price}" data-name="${p.name}">`;
  orderList.appendChild(div);
});

function updateTotal(){
  total=0;
  document.querySelectorAll('.quantity-input').forEach(input=>{
    total += (parseInt(input.value)||0)*parseFloat(input.dataset.price);
  });
  totalEl.textContent=total.toLocaleString('fr-FR');
}

document.querySelectorAll('.quantity-input').forEach(input=>{
  input.addEventListener('input',updateTotal);
});

// Modal
const modal=document.getElementById('modal');
document.getElementById('open-modal').onclick=()=>modal.style.display='flex';
document.getElementById('close-modal').onclick=()=>modal.style.display='none';
modal.onclick=e=>{if(e.target===modal)modal.style.display='none';};

// Envoi AJAX
document.getElementById('order-form').addEventListener('submit',async e=>{
  e.preventDefault();
  const name=document.getElementById('name').value;
  const phone=document.getElementById('phone').value;
  const comments=document.getElementById('comments').value;

  // Construire résumé
  let summary=`Nom: ${name}\nTéléphone: ${phone}\nCommande:\n`;
  document.querySelectorAll('.quantity-input').forEach(input=>{
    if(parseInt(input.value)>0){
      summary+=`- ${input.dataset.name}: ${input.value}\n`;
    }
  });
  summary+=`Total: ${total} FCFA\nCommentaires: ${comments}`;

  const formData=new FormData();
  formData.append('access_key','1c1a250f-c10b-4450-a095-a9dc7b0c0085');
  formData.append('subject','Nouvelle commande Radiya');
  formData.append('from_name','Site Radiya');
  formData.append('name',name);
  formData.append('email','radiya.jus@gmail.com'); // email obligatoire pour Web3Forms
  formData.append('message',summary);

  const status=document.getElementById('status');
  status.style.display='block';
  status.textContent='Envoi en cours...';
  status.className='status';

  try{
    const res=await fetch('https://api.web3forms.com/submit',{method:'POST',body:formData});
    const result=await res.json();
    if(result.success){
      status.textContent='✅ Commande envoyée avec succès !';
      status.classList.add('success');
      e.target.reset();
      updateTotal();
    }else{
      status.textContent='❌ Erreur: '+result.message;
      status.classList.add('error');
    }
  }catch(err){
    status.textContent='⚠ Problème réseau';
    status.classList.add('error');
  }
});
</script>
</body>
</html>
